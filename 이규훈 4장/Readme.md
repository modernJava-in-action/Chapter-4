# 스트림이란?
자바 8 API에 추가된 기능이다. 스트림을 이용하면 선언형(즉, 데이터를 처리하는 임시 구현 코드 대신 질의로 표현가능하다.)으로 컬렉션 데이터를 처리할 수 있다.

> 선언형 vs 절차적 개발
--
절차적 방식
--
절차적 방식은 길찾기로 예시로 스타벅스를 방문하는데 다음과 같은 과정을 거친다.
"신대방 삼거리역 7호선 2번출구로 나와서 상도로 길을 따라 도보로 400m이동한 후 삼거리에서 오른쪽으로 꺾으세요" 
즉, 목적을 이루기 위해서 어떻게(How)라는 측면에 맞추어서 진행한다.
만일 목적이 제대로 이루어지지 않는 문제가 발생한다면 어떤 과정에서 문제가 생겼는지 모든 과정을 되짚어 보아야한다. 이는 코드가 길어지면 유지보수가 어려워진다.
선언형
--
선언적 방식은 스타벅스 주소는 서울 동작구 xxx 입니다. 같이 선언하는 방식이다. 무엇이 되면 되는지 우리가 원하는 최종결과를 선언하는 방식이다. 

일단은 스트림이 데이터 컬렉션 반복을 처리해주는 기능정도로만 생각.

정리하면 다음과 같이 정리된다

1. 선언형으로 코드 구현가능
- 루프와 if로 동작을 구현,지정할 필요가 없다.
- 람다표현식을 이용해서 간편하게 구현가능
2. filter,sorted,map,collect같은 여러 빌딩 블록 연산을 연결해서 복잡한 데이터처리 파이프라인을 만들 수 있다.


#### 스트림 API의 특징
1. 선언형: 더 간결, 가독성 up
2. 조립가능: 유연성이 좋아짐
3. 병렬화: 성능이 좋아짐


# 스트림 시작하기

스트림이란 정확히 무엇일까?
`데이터 처리 연산을 지원하도록 소스에서 추출된 연속된 요소`로 정의할 수 있다.
이를 분해해보자

- 연속된 요소: 컬렉션과 다르게 표현 계산식이 주를 이룬다.(filter, sorted, map)
- 소스: 스트림의 컬렉션, 배열, I/O 지원 등의 데이터 제공 소스로부터 데이터를 소비한다.
- 데이터 처리 연산: 스트림은 함수형 프로그래밍 언어에서 일반적으로 지원하는 연산과 데이터베이스와 비슷한 연산을 지원한다.


```
 public static List<String> getLowCaloricDishesNamesInJava8(List<Dish> dishes) {
    return dishes.stream()
        .filter(d -> d.getCalories() < 400)
        .sorted(comparing(Dish::getCalories))
        .map(Dish::getName)
        .collect(toList());
  }
```
이 코드를 보면 collect가 호출되기 전까지의 메서드는 저장이 되었다가 collect가 호출되고 나서야 호출된다.
collect가 호출되기전까지는 어느 것도 선택되지 않으며 출력 결과도 없다.


# 컬렉션 vs 스트림
데이터를 `언제` 계산하는지가 가장 큰 차이다.
컬렉션은 현재 자료구조가 포함하는 모든 값을 저장하느 구조
모든 요소가 컬렉션에 추가하기 전에 계산되어야한다.

스트림은 이론적으로 요청할때만 요소를 계산하는 고정된 자료구조다.

스트림은 한번만 탐색될 수 있고 1번만 소비할 수 있다
그리고 데이터 반복처리방법에도 차이가 있다.


- 외부반복
컬력센 인터페이스를 사용하려면 사용자가 직접 반복하는것
- 내부반복
```
List<String> names = menu.stream()
						 .map(Dish::getName())
                         .collect(toList());
```
map의 메서드를 getName메서드로 파라미터화해서 요리명을 추출한다.

내부 반복이 더 좋은 이유
1. 병렬로 처리 가능
2. 더 최정화된 다양한 순서로 처리할 수 있다.
이렇게 하면 반복과정을 우리가 신경쓰지않아도 된다는 장점이 있다.

스트림 반환 -> 중간연산
스트림이 아닌거 반환 -> 최종연산?
이 부분은 조금 헷갈린다.

